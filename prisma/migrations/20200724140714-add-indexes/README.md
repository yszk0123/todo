# Migration `20200724140714-add-indexes`

This migration has been generated by Yuji Suzuki at 7/24/2020, 2:07:15 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE  INDEX "Category.id_name_ownerId" ON "public"."Category"("id","name","ownerId")

CREATE  INDEX "Checkpoint.id_ownerId" ON "public"."Checkpoint"("id","ownerId")

CREATE  INDEX "Tag.id_ownerId" ON "public"."Tag"("id","ownerId")

CREATE  INDEX "Todo.id_ownerId" ON "public"."Todo"("id","ownerId")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200709012911-add-archived-at-to-category-and-tag..20200724140714-add-indexes
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -44,8 +44,10 @@
   owner      User      @relation(fields: [ownerId], references: [id])
   ownerId    String
   todos      Todo[]
   tags       Tag[]
+
+  @@index([id, name, ownerId])
 }
 model Todo {
   id           String      @default(uuid()) @id
@@ -59,8 +61,10 @@
   checkpointId String?
   tags         Tag[]
   status       TodoStatus  @default(TODO)
   archivedAt   DateTime?
+
+  @@index([id, ownerId])
 }
 model Tag {
   id         String     @default(uuid()) @id
@@ -71,8 +75,10 @@
   owner      User       @relation(fields: [ownerId], references: [id])
   ownerId    String
   categories Category[] @relation(references: [id])
   todos      Todo[]     @relation(references: [id])
+
+  @@index([id, ownerId])
 }
 model Checkpoint {
   id         String    @default(uuid()) @id
@@ -81,8 +87,10 @@
   owner      User      @relation(fields: [ownerId], references: [id])
   ownerId    String
   todos      Todo[]
   archivedAt DateTime?
+
+  @@index([id, ownerId])
 }
 enum TodoStatus {
   TODO
```


