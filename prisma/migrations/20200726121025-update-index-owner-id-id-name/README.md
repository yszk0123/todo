# Migration `20200726121025-update-index-owner-id-id-name`

This migration has been generated by Yuji Suzuki at 7/26/2020, 12:10:25 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."Category.id_name"

DROP INDEX "public"."Category.ownerId"

DROP INDEX "public"."Checkpoint.id"

DROP INDEX "public"."Checkpoint.ownerId"

DROP INDEX "public"."Tag.id"

DROP INDEX "public"."Tag.ownerId"

DROP INDEX "public"."Todo.id"

DROP INDEX "public"."Todo.ownerId"

CREATE  INDEX "Category.ownerId_id_name" ON "public"."Category"("ownerId","id","name")

CREATE  INDEX "Checkpoint.ownerId_id" ON "public"."Checkpoint"("ownerId","id")

CREATE  INDEX "Tag.ownerId_id" ON "public"."Tag"("ownerId","id")

CREATE  INDEX "Todo.ownerId_id" ON "public"."Todo"("ownerId","id")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200726120138-update-index-id-name-owner-id..20200726121025-update-index-owner-id-id-name
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -45,10 +45,9 @@
   ownerId    String
   todos      Todo[]
   tags       Tag[]
-  @@index([id, name])
-  @@index([ownerId])
+  @@index([ownerId, id, name])
 }
 model Todo {
   id           String      @default(uuid()) @id
@@ -63,10 +62,9 @@
   tags         Tag[]
   status       TodoStatus  @default(TODO)
   archivedAt   DateTime?
-  @@index([id])
-  @@index([ownerId])
+  @@index([ownerId, id])
 }
 model Tag {
   id         String     @default(uuid()) @id
@@ -81,10 +79,9 @@
   parentId   String?
   parent     Tag?       @relation("TagTree", fields: [parentId], references: [id])
   children   Tag[]      @relation("TagTree")
-  @@index([id])
-  @@index([ownerId])
+  @@index([ownerId, id])
 }
 model Checkpoint {
   id         String    @default(uuid()) @id
@@ -94,10 +91,9 @@
   ownerId    String
   todos      Todo[]
   archivedAt DateTime?
-  @@index([id])
-  @@index([ownerId])
+  @@index([ownerId, id])
 }
 enum TodoStatus {
   TODO
```


